<!DOCTYPE html lang="en-UK">
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Traffic accidents demo</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>

		<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5.1/leaflet.css" />
		<!--[if lte IE 8]>
		    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5.1/leaflet.ie.css" />
		<![endif]-->
		<style type="text/css" media="screen">
			body{
				margin: 0;
				padding: 0;
			}

			#map {
				width: 100%;
				height: 100%;
			}
		</style>
		<script src="http://cdn.leafletjs.com/leaflet-0.5.1/leaflet-src.js"></script>
		<script type="text/javascript" src="heatmap.js"></script>
		<script type="text/javascript" src="heatmap-leaflet.js"></script>
		<script type="text/javascript" src="QuadTree.js"></script>

		<script type="text/javascript" charset="utf-8">
			$(function() {
				var baseLayer = L.tileLayer(
					'http://{s}.tile.cloudmade.com/ad132e106cd246ec961bbdfbe0228fe8/997/256/{z}/{x}/{y}.png',{
						attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',
						maxZoom: 18
					}
				);

				var heatmapLayer = L.TileLayer.heatMap({
					// radius could be absolute or relative
					// absolute: radius in meters, relative: radius in pixels
					//radius: { value: 200, absolute: true },
			        radius: { value: 10, absolute: false },
					opacity: 0.8,
					gradient: {
						0.45: "rgb(0,0,255)",
						0.55: "rgb(0,255,255)",
						0.65: "rgb(0,255,0)",
						0.95: "yellow",
						1.0: "rgb(255,0,0)"
					}
					//gradient: {
					//	0.25: "rgb(255,130,177)",
					//	0.5: "rgb(255,53,130)",
					//	0.75: "rgb(204,43,104)",
					//	0.9: "rgb(127,27,65)",
					//	1.0:  "rgb(127,65,89)"
					//}
				});

				heatmapLayer.setData(testData.data);

				var map = new L.Map('map', {
					center: new L.LatLng(1.35, 103.8),
					zoom: 12,
					layers: [baseLayer, heatmapLayer]
				});

				// make accessible for debugging
				layer = heatmapLayer;
			});
		</script>
	</head>
	<body>
		<div id="map"></div>
	</body>

	<script type="text/javascript" charset="utf-8">
		var testData={data: [{lon: 103.837496346169, lat: 1.39519347518553, value:1}, {lon: 103.736555571152, lat: 1.38234616842453, value:1}, {lon: 103.785907550472, lat: 1.34396003703067, value:1}, {lon: 103.805144795508, lat: 1.34031927523099, value:1}, {lon: 103.77078357641, lat: 1.39042601315467, value:1}, {lon: 103.940433712431, lat: 1.33606729060046, value:1}, {lon: 103.819519540937, lat: 1.39444596309426, value:1}, {lon: 103.876690699535, lat: 1.28271393927862, value:1}, {lon: 103.663933884049, lat: 1.32335794851747, value:1}, {lon: 103.798979058827, lat: 1.34690304060993, value:1}, {lon: 103.899194767996, lat: 1.32456933825511, value:1}, {lon: 103.856421875886, lat: 1.32910340976907, value:1}, {lon: 103.745903643844, lat: 1.323811859384, value:1}, {lon: 103.783914398025, lat: 1.29671194477231, value:1}, {lon: 103.774804476292, lat: 1.30230813666724, value:1}, {lon: 103.763438833149, lat: 1.31973483194908, value:1}, {lon: 103.854349738556, lat: 1.34322426578243, value:1}, {lon: 103.858516468764, lat: 1.3612875290387, value:1}, {lon: 103.8625933596, lat: 1.33131486776987, value:1}, {lon: 103.788124870718, lat: 1.29234446767662, value:1}, {lon: 103.787650024225, lat: 1.34475654399369, value:1}, {lon: 103.963219429047, lat: 1.3623050846089, value:1}, {lon: 103.800821112833, lat: 1.28423920372814, value:1}, {lon: 103.781041625589, lat: 1.34204657392885, value:1}, {lon: 103.853836527719, lat: 1.30296982718974, value:1}, {lon: 103.840289861661, lat: 1.30394760119417, value:1}, {lon: 103.805550399258, lat: 1.28384450462171, value:1}, {lon: 103.800832450591, lat: 1.34484030161162, value:1}, {lon: 103.80398666081, lat: 1.28398901357958, value:1}, {lon: 103.903212135447, lat: 1.3255038605449, value:1}, {lon: 103.771306735542, lat: 1.41776471834061, value:1}, {lon: 103.7713613099, lat: 1.41595701495597, value:1}, {lon: 103.7713613099, lat: 1.41595701495597, value:1}, {lon: 103.94736600772, lat: 1.34221692348396, value:1}, {lon: 103.839824438996, lat: 1.35119405977311, value:1}, {lon: 103.795921586403, lat: 1.42251796184992, value:1}, {lon: 103.905597384991, lat: 1.39538785839311, value:1}, {lon: 103.858869358688, lat: 1.32976173574819, value:1}, {lon: 103.806090498553, lat: 1.41347185345584, value:1}, {lon: 103.863967715097, lat: 1.27292409472757, value:1}, {lon: 103.875282976606, lat: 1.28158964766848, value:1}, {lon: 103.776376691821, lat: 1.3013407653335, value:1}, {lon: 103.773682574614, lat: 1.40083902154605, value:1}, {lon: 103.771680568707, lat: 1.41017369174832, value:1}, {lon: 103.837159378719, lat: 1.39520033084103, value:1}, {lon: 103.963546851111, lat: 1.35514233873617, value:1}, {lon: 103.909052283494, lat: 1.37459986253377, value:1}, {lon: 103.81051822572, lat: 1.33544661585556, value:1}, {lon: 103.827098514693, lat: 1.32679247003614, value:1}, {lon: 103.827098514693, lat: 1.32679247003614, value:1}, {lon: 103.911299538399, lat: 1.30174319351552, value:1}, {lon: 103.801181284545, lat: 1.34456593116573, value:1}, {lon: 103.771812982561, lat: 1.39059231666608, value:1}, {lon: 103.774803497994, lat: 1.30225973506642, value:1}, {lon: 103.85836348846, lat: 1.38297210370992, value:1}, {lon: 103.858314423114, lat: 1.38181183221404, value:1}, {lon: 103.756923895698, lat: 1.3370000381234, value:1}, {lon: 103.837236923824, lat: 1.33809534073678, value:1}, {lon: 103.663379686279, lat: 1.32295402290965, value:1}, {lon: 103.907864657147, lat: 1.36987269263791, value:1}, {lon: 103.771319029944, lat: 1.42141022550691, value:1}, {lon: 103.857788611682, lat: 1.32332359377907, value:1}, {lon: 103.858085258692, lat: 1.37911788765189, value:1}, {lon: 103.783354237504, lat: 1.29714501576702, value:1}, {lon: 103.963241550025, lat: 1.35588294636433, value:1}, {lon: 103.77640175272, lat: 1.30131943194794, value:1}, {lon: 103.849492041286, lat: 1.27325749442452, value:1}, {lon: 103.819530104417, lat: 1.32227489384669, value:1}, {lon: 103.708070125563, lat: 1.36589681529708, value:1}, {lon: 103.764828262419, lat: 1.30987251866557, value:1}, {lon: 103.948672138923, lat: 1.36664486123299, value:1}, {lon: 103.870433369326, lat: 1.32651276750195, value:1}, {lon: 103.792101858892, lat: 1.28979785401759, value:1}, {lon: 103.76958101052, lat: 1.39040976554633, value:1}, {lon: 103.891224176189, lat: 1.32137610201774, value:1}, {lon: 103.846815954298, lat: 1.32979005682674, value:1}, {lon: 103.899302073473, lat: 1.29780483302354, value:1}, {lon: 103.756844315069, lat: 1.31843125844291, value:1}, {lon: 103.907160221719, lat: 1.32656023217544, value:1}, {lon: 103.797095440956, lat: 1.42141413245117, value:1}, {lon: 103.758449940988, lat: 1.33617132648953, value:1}, {lon: 103.771397042736, lat: 1.4140743935669, value:1}, {lon: 103.858390729453, lat: 1.38346578673834, value:1}, {lon: 103.855042067983, lat: 1.27180989072032, value:1}, {lon: 103.751442936943, lat: 1.34028404765576, value:1}, {lon: 103.752980134241, lat: 1.33926643659974, value:1}, {lon: 103.838424410494, lat: 1.31437211848412, value:1}, {lon: 103.872645652241, lat: 1.40111118790911, value:1}, {lon: 103.85817153972, lat: 1.38947801047121, value:1}, {lon: 103.838305711856, lat: 1.31428794045889, value:1}, {lon: 103.72520846616, lat: 1.37254309050394, value:1}, {lon: 103.852888766886, lat: 1.28399832329457, value:1}, {lon: 103.768611839612, lat: 1.43430131542936, value:1}, {lon: 103.734229331604, lat: 1.38024720851245, value:1}, {lon: 103.882001689471, lat: 1.32101123631755, value:1}, {lon: 103.857878189347, lat: 1.35948488443923, value:1}, {lon: 103.776489011472, lat: 1.3012728501208, value:1}, {lon: 103.84646899547, lat: 1.27255301139553, value:1}, {lon: 103.88601859269, lat: 1.32218265830125, value:1}, {lon: 103.795748706882, lat: 1.28723023861783, value:1}, {lon: 103.899714252552, lat: 1.32471988282834, value:1}, {lon: 103.753623468719, lat: 1.32126047694239, value:1}, {lon: 103.768977586136, lat: 1.43105798083742, value:1}, {lon: 103.880946690153, lat: 1.32052777466655, value:1}, {lon: 103.847205404061, lat: 1.34857381363802, value:1}, {lon: 103.826238969246, lat: 1.29059131720188, value:1}, {lon: 103.811342923373, lat: 1.40332123836051, value:1}, {lon: 103.858664060488, lat: 1.34851087650376, value:1}, {lon: 103.90342445642, lat: 1.32556715998247, value:1}, {lon: 103.874622071544, lat: 1.32117949208157, value:1}, {lon: 103.913502138282, lat: 1.32952101081143, value:1}, {lon: 103.87182521071, lat: 1.32526941687558, value:1}, {lon: 103.860746057619, lat: 1.3185604554686, value:1}, {lon: 103.943026141901, lat: 1.33819571107394, value:1}, {lon: 103.811807587959, lat: 1.32045417177023, value:1}, {lon: 103.863195863395, lat: 1.27285501940601, value:1}, {lon: 103.906042937042, lat: 1.30027231296965, value:1}, {lon: 103.897956598967, lat: 1.29728413504678, value:1}, {lon: 103.839678161047, lat: 1.27972862155189, value:1}, {lon: 103.794926126828, lat: 1.4226017075577, value:1}, {lon: 103.861301502949, lat: 1.33029168489467, value:1}, {lon: 103.85823817937, lat: 1.3870099098067, value:1}, {lon: 103.866226406199, lat: 1.30426952025015, value:1}, {lon: 103.860706300739, lat: 1.33039261868696, value:1}, {lon: 103.84187095091, lat: 1.36079388131179, value:1}, {lon: 103.793705539051, lat: 1.34887376869131, value:1}, {lon: 103.816441619123, lat: 1.33245003408891, value:1}, {lon: 103.738004909611, lat: 1.34530224077222, value:1}, {lon: 103.857761385438, lat: 1.32331536433162, value:1}, {lon: 103.866423423015, lat: 1.32892080360134, value:1}, {lon: 103.910539925591, lat: 1.39028123118217, value:1}, {lon: 103.850385020316, lat: 1.27407099203993, value:1}, {lon: 103.771361520164, lat: 1.41548339080445, value:1}, {lon: 103.789775959307, lat: 1.29131190225439, value:1}, {lon: 103.816434444618, lat: 1.39487215153598, value:1}, {lon: 103.909612092461, lat: 1.37428568683199, value:1}, {lon: 103.9200811155, lat: 1.33269191966782, value:1}, {lon: 103.814889526514, lat: 1.33336858592668, value:1}, {lon: 103.92348948574, lat: 1.37849843812972, value:1}, {lon: 103.87777187297, lat: 1.2955433183229, value:1}, {lon: 103.760745261345, lat: 1.31578286474902, value:1}, {lon: 103.844348760836, lat: 1.29850530930206, value:1}, {lon: 103.856860407005, lat: 1.34328836219391, value:1}, {lon: 103.774012814528, lat: 1.39358645903851, value:1}, {lon: 103.829151229837, lat: 1.39792274646588, value:1}, {lon: 103.818956564262, lat: 1.33674044587909, value:1}, {lon: 103.755074880645, lat: 1.388762218712, value:1}, {lon: 103.82513616783, lat: 1.3275550335476, value:1}, {lon: 103.855568081228, lat: 1.39900689532696, value:1}, {lon: 103.737712447795, lat: 1.38327300670744, value:1}, {lon: 103.837391736832, lat: 1.3273201894258, value:1}, {lon: 103.857946741818, lat: 1.39374173657122, value:1}, {lon: 103.777274633192, lat: 1.37503107548521, value:1}, {lon: 103.8592672578, lat: 1.34694076697185, value:1}, {lon: 103.977165208973, lat: 1.33269449430751, value:1}, {lon: 103.903179248475, lat: 1.3255068639668, value:1}, {lon: 103.903179248475, lat: 1.3255068639668, value:1}, {lon: 103.855825281471, lat: 1.2930133873019, value:1}, {lon: 103.724714047505, lat: 1.32447049602036, value:1}, {lon: 103.81668333371, lat: 1.33202329325412, value:1}, {lon: 103.849717769423, lat: 1.31771137278482, value:1}, {lon: 103.768315537802, lat: 1.30595471669642, value:1}, {lon: 103.869470492229, lat: 1.32745593445638, value:1}, {lon: 103.860496301874, lat: 1.33063100245529, value:1}, {lon: 103.861699782137, lat: 1.32743398803823, value:1}, {lon: 103.903500834083, lat: 1.32558913384947, value:1}, {lon: 103.795551184128, lat: 1.3490107280209, value:1}, {lon: 103.903637055409, lat: 1.32561110600501, value:1}, {lon: 103.770400111659, lat: 1.30451892006606, value:1}, {lon: 103.785014981057, lat: 1.42528946042494, value:1}, {lon: 103.776096114662, lat: 1.42491376307626, value:1}, {lon: 103.699294172886, lat: 1.3563545072773, value:1}, {lon: 103.811396928218, lat: 1.40331997276121, value:1}, {lon: 103.813353887142, lat: 1.39930680284687, value:1}, {lon: 103.755128822684, lat: 1.3985547382154, value:1}, {lon: 103.786594314117, lat: 1.34428371324799, value:1}, {lon: 103.838610630589, lat: 1.28628489886816, value:1}, {lon: 103.867082864356, lat: 1.32896996491736, value:1}, {lon: 103.859957949572, lat: 1.34475456713846, value:1}, {lon: 103.881025144415, lat: 1.32061623807271, value:1}, {lon: 103.801062293577, lat: 1.41874430184914, value:1}, {lon: 103.765469114977, lat: 1.39058302573523, value:1}, {lon: 103.765469115054, lat: 1.39058031264476, value:1}, {lon: 103.934317057035, lat: 1.3088961480172, value:1}, {lon: 103.852004250848, lat: 1.29592871978193, value:1}, {lon: 103.906122468783, lat: 1.32549311373489, value:1}, {lon: 103.844547011848, lat: 1.3298803328758, value:1}, {lon: 103.903424456269, lat: 1.32556176092977, value:1}, {lon: 103.882638687444, lat: 1.32128278619648, value:1}, {lon: 103.818483748231, lat: 1.3944486698409, value:1}, {lon: 103.81848374818, lat: 1.39445689955392, value:1}, {lon: 103.740668343425, lat: 1.32579296556336, value:1}, {lon: 103.8481188917, lat: 1.3169386756091, value:1}, {lon: 103.846551956159, lat: 1.27586597113495, value:1}, {lon: 103.786837089053, lat: 1.42848119608175, value:1}, {lon: 103.859386633833, lat: 1.29977754002529, value:1}, {lon: 103.915545103199, lat: 1.37996672611125, value:1}, {lon: 103.795210798764, lat: 1.34906957870341, value:1}, {lon: 103.844104415782, lat: 1.29546772079971, value:1}, {lon: 103.841274930308, lat: 1.3270666051561, value:1}, {lon: 103.859498585334, lat: 1.40079205090832, value:1}, {lon: 103.773911461834, lat: 1.39617332525925, value:1}, {lon: 103.939624912929, lat: 1.33544168763805, value:1}, {lon: 103.787945979423, lat: 1.42616890547217, value:1}, {lon: 103.80547014204, lat: 1.28381620616791, value:1}, {lon: 103.79789447302, lat: 1.42101749100245, value:1}, {lon: 103.800670975888, lat: 1.34508801387519, value:1}, {lon: 103.874673615225, lat: 1.31807872404999, value:1}, {lon: 103.789904188011, lat: 1.34841590521938, value:1}, {lon: 103.790209416498, lat: 1.34864906481137, value:1}, {lon: 103.789904188011, lat: 1.34841590521938, value:1}, {lon: 103.790209416498, lat: 1.34864906481137, value:1}, {lon: 103.859396733178, lat: 1.33007104998855, value:1}, {lon: 103.811829670861, lat: 1.33438300468282, value:1}, {lon: 103.962488756493, lat: 1.3578311455885, value:1}, {lon: 103.812681865795, lat: 1.33399668560572, value:1}, {lon: 103.940323292932, lat: 1.37142021280549, value:1}, {lon: 103.76352524644, lat: 1.33353490349638, value:1}, {lon: 103.768579520351, lat: 1.43354867631554, value:1}, {lon: 103.675159139135, lat: 1.33131255061145, value:1}, {lon: 103.789707926793, lat: 1.34826226830035, value:1}, {lon: 103.817760255068, lat: 1.33178950401914, value:1}, {lon: 103.731533537334, lat: 1.37800978180575, value:1}, {lon: 103.812154625376, lat: 1.40198144875799, value:1}, {lon: 103.860839551249, lat: 1.2895285488815, value:1}, {lon: 103.859060753212, lat: 1.36254829746527, value:1}, {lon: 103.860423765856, lat: 1.36918805215141, value:1}, {lon: 103.858323862385, lat: 1.38307638635449, value:1} ]};
	</script>
</html>